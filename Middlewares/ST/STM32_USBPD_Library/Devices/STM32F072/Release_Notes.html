<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Release Notes for STM32 USB-C Power Delivery F0 Device Driver</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="_htmresc/mini-st.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="row">
<div class="col-sm-12 col-lg-4">
<div class="card fluid">
<div class="sectione dark">
<center>
<h1 id="release-notes-for-stm32-usb-c-power-delivery-f0-device-driver"><small>Release Notes for</small> STM32 USB-C Power Delivery F0 Device Driver</h1>
<p>Copyright © 2018 STMicroelectronics<br />
</p>
<a href="https://www.st.com" class="logo"><img src="_htmresc/st_logo.png" alt="ST logo" /></a>
</center>
</div>
</div>
<h1 id="license">License</h1>
<p>This software component is licensed by ST under Ultimate Liberty license SLA0044, the "License"; You may not use this component except in compliance with the License. You may obtain a copy of the License at:</p>
<p><a href="http://www.st.com/SLA0044">http://www.st.com/SLA0044</a></p>
<h1 id="purpose">Purpose</h1>
<p>The USB-PD device driver provides a set of functions to manage the physical layer (i.e. low level of the type C state machine and low level of message transport). This includes :</p>
<ul>
<li><p>Type C state machine: SRC, SNK or DRP</p></li>
<li><p>Physical layer : message handling SOP, SOP’, SOP’’, HARDRESET, …</p></li>
<li><p>Timer server to handle GOODCRC, PRL repetition timing</p></li>
</ul>
<p>The USB-PD library is developed following the Universal Serial Bus Power Delivery Specification Revision 3.0, V1.2 (June 06, 2018) and Universal Serial Bus type-C Cable and Connector Specification, Revision 1.3 (July 14, 2017). It has passed successfully the official certification.</p>
</div>
<section id="update-history" class="col-sm-12 col-lg-8">
<h1>Update History</h1>
<div class="collapse">
<input type="checkbox" id="collapse-section8" checked aria-hidden="true"> <label for="collapse-section8" aria-hidden="true">v3.0.0 / 13-Jan-2020</label>
<div>
<h2 id="main-changes">Main Changes</h2>
<h3 id="maintenance-release">Maintenance release</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Update release note</td>
</tr>
<tr class="even">
<td style="text-align: left;">Update release note</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Issue to report VBUS during PRS from SRC to SNK (detach on VBUS even if VBUS is well present)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Change return value from uint32_t to uint16_t for HW_IF_PWR_GetVoltage (compatibility with F0)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">correction link with renaming toogle toggle</td>
</tr>
<tr class="even">
<td style="text-align: left;">Add switch for VBUS ON/OFF functions</td>
</tr>
<tr class="odd">
<td style="text-align: left;">update for MISRA in PHY</td>
</tr>
<tr class="even">
<td style="text-align: left;">Add delay under NRTOS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Enable &amp; Disable RX reception to avoid system issue (Lecroy pb 2.2.6 detected with NRTOS on F0)</td>
</tr>
<tr class="even">
<td style="text-align: left;">[Ticket 50039] Update state machine to allow Rp Resistor update</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Move hw version in BSP</td>
</tr>
<tr class="even">
<td style="text-align: left;">PHY port state not correctly reinitialized. Issue to transmit new SRC capa after detach.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Complete HAL-&gt;LL optimisations under clear flag (USE_HAL_ADC added, USE_HAL_SPI used in replacement of HAL_MODULE_SPI_ENABLED)</td>
</tr>
</tbody>
</table>
<h2 id="known-limitations">Known Limitations</h2>
<p>Outstanding bugs list : None</p>
<p>Requirements not met or planned in a forthcoming release : None</p>
<h2 id="development-toolchains-and-compilers">Development Toolchains and Compilers</h2>
<ul>
<li>IAR Embedded Workbench for ARM (EWARM) toolchain V8.20.2</li>
<li>RealView Microcontroller Development Kit (MDK-ARM) toolchain V5.25</li>
<li>System Workbench STM32 (SW4STM32) toolchain V2.7.2</li>
</ul>
<h2 id="supported-devices-and-boards">Supported Devices and boards</h2>
<p>All STM32F0xx devices embedding USBPD IP</p>
<h2 id="backward-compatibility">Backward compatibility</h2>
<p>No compatibility break with previous version</p>
<h2 id="dependencies">Dependencies</h2>
<p>This software release is compatible with USB-C Power Delivery Core Stack Library v2.6.0</p>
</div>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section7"  aria-hidden="true"> <label for="collapse-section7" aria-hidden="true">V2.1.0 / 14-May-2018</label>
<div>
<h2 id="main-changes-1">Main Changes</h2>
<h3 id="maintenance-release-1">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">STM32F0 Device Driver version delivery for X-CUBE-USBPD V2.1.0 (used in context of P-Nucleo-USB001 kit with AFE MB1257 board).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Implementation of code optimizations (RAM/ROM constraints), based on use of LL APIs.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Update of CAD_Init() function (no more parameter related to wap ongoing management).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Update in functions related to PWR management (parameters added in HW_IF_PWR_Enable(), new name of HW_IF_PWR_VBUSIsEnabled(), HW_IF_PWR_DisableDischPath() function added for Discharge path management).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Addition of new API to handle Device dependent characteristics (Retry timer value, FRS signalling, supported SOP types, …)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Handling of PD3.0 extended messages : msg size type updated in USBPD_PHY_SendMessage().</td>
</tr>
</tbody>
</table>
<h2 id="known-limitations-1">Known limitations</h2>
<p>Outstanding bugs list : None</p>
<p>Requirements not met or planned in a forthcoming release : None</p>
<h2 id="development-toolchains-and-compilers-1">Development Toolchains and Compilers</h2>
<ul>
<li>IAR Embedded Workbench for ARM (EWARM) toolchain V8.20.2</li>
<li>RealView Microcontroller Development Kit (MDK-ARM) toolchain V5.25</li>
<li>System Workbench STM32 (SW4STM32) toolchain V2.7.2</li>
</ul>
<h2 id="supported-devices-and-boards-1">Supported Devices and boards</h2>
<p>All STM32G0xx devices embedding USBPD IP</p>
<h2 id="backward-compatibility-1">Backward compatibility</h2>
<p>This version introduces a compatibility break compared to previous version (HW IF PWR interface update)</p>
<h2 id="dependencies-1">Dependencies</h2>
<p>This software release is compatible with USB-C Power Delivery Core Stack Library v2.6.0</p>
</div>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section6" aria-hidden="true"> <label for="collapse-section6" aria-hidden="true">V2.0.0 / 12-Jan-2018</label>
<h2 id="main-changes-2">Main Changes</h2>
<h3 id="maintenance-release-2">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">STM32F0 Device Driver version delivery for X-CUBE-USBPD V2.0.0.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Code clean-up and code comments review. Code documentation added (Doxygen).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Check of specific transitions for ongoing PR Swap now handled in Device side (no more in Core Stack).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Move BMC task under Device driver scope (open in source code). previously handled in USBPD Core stack component.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Corrections of issues found during USB PD certification workshop #106.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fix regressions on Ellisys (TD.PD.PC.E2 PS_RDY Sent Timely).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Update HW_IF_PWR_GetCurrent to return automatically positive value for IBUS.</td>
</tr>
</tbody>
</table>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section5" aria-hidden="true"> <label for="collapse-section5" aria-hidden="true">V2.4.0 / 15-Nov-2018</label>
<h2 id="main-changes-3">Main Changes</h2>
<h3 id="maintenance-release-3">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Update for cubemx integration</td>
</tr>
<tr class="even">
<td style="text-align: left;">Remove BSP reference, now managed trough the header file usbpd_devices_conf.h</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Remove reference to disco board</td>
</tr>
<tr class="even">
<td style="text-align: left;">Update for error recovery management</td>
</tr>
</tbody>
</table>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section4" aria-hidden="true"> <label for="collapse-section4" aria-hidden="true">V1.4.0 / 27-Jul-2017</label>
<h2 id="main-changes-4">Main Changes</h2>
<h3 id="maintenance-release-4">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">STM32F0 Device Driver is now delivered as source code.</td>
</tr>
<tr class="even">
<td style="text-align: left;">fix issue with ADC source clock when system clock is set to 8MHz.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Update CAD Threshold for TD.4.5.4 issue.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Addition of Error Recovery API.</td>
</tr>
</tbody>
</table>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section3" aria-hidden="true"> <label for="collapse-section3" aria-hidden="true">V1.3.0 / 27-Apr-2017</label>
<h2 id="main-changes-5">Main Changes</h2>
<h3 id="maintenance-release-5">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">second official version for STM32F0xx devices. This item only refers to F0 device part.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Main Changes compared to USB-C Power Delivery Library delivered in previous versions</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Power role swap improvements.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Improved management of second port of MB1257</td>
</tr>
</tbody>
</table>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section2" aria-hidden="true"> <label for="collapse-section2" aria-hidden="true">V2.1.1 / 15-Jun-2018</label>
<h2 id="main-changes-6">Main Changes</h2>
<h3 id="maintenance-release-6">Maintenance release</h3>
<table>
<caption>Fixed bugs list</caption>
<thead>
<tr class="header">
<th>Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Main change add a file usbpd_devices_conf.h to configure the device</td>
</tr>
</tbody>
</table>
</div>
<div class="collapse">
<input type="checkbox" id="collapse-section1" aria-hidden="true"> <label for="collapse-section1" aria-hidden="true">V1.2.0 / 16-Jan-2017</label>
<h2 id="main-changes-7">Main Changes</h2>
<h3 id="initial-release">Initial release</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Headline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">First official version for STM32F0xx devices after USBPD library split into Core and Device parts. This item only refers to F0 device part.</td>
</tr>
</tbody>
</table>
<p>Main Changes compared to USB-C Power Delivery Library delivered in previous versions</p>
<p>Addition of automatic mechanism for board identification (MB1257 RevB/RevC) and auto configuration Various corrections in regards with test updates and test additions in USBPD Conformance test tools Rp/Rd management improvement during transmission Timerserver feature moved inside Device</p>
</div>
</section>
</div>
<footer class="sticky">
<p>For complete documentation on <strong>STM32 32-bit Arm Cortex MCUs</strong>, visit: <a href="http://www.st.com/STM32">http://www.st.com/STM32</a></p>
This release note uses up to date web standards and, for this reason, should not be opened with Internet Explorer but preferably with popular browsers such as Google Chrome, Mozilla Firefox, Opera or Microsoft Edge.
</footer>
</body>
</html>
